(
    -- Admin pode sempre atualizar qualquer linha
    (SELECT user_role FROM profiles WHERE id = auth.uid()) = 'admin'::text
)
OR
(
    -- Para outros papéis (assumindo 'restaurante' devido à cláusula USING),
    -- o NEW.restaurant_id deve corresponder ao restaurant_id do utilizador.
    NEW.restaurant_id = (SELECT restaurant_id FROM profiles WHERE id = auth.uid())
)