(
    -- Admin pode sempre atualizar qualquer linha
    (SELECT user_role FROM profiles WHERE id = auth.uid()) = 'admin'::text
)
OR
(
    -- Restaurante pode atualizar se o seu papel for 'restaurante'.
    -- A validação de NEW.restaurant_id é agora feita pelo trigger.
    (SELECT user_role FROM profiles WHERE id = auth.uid()) = 'restaurante'::text
)